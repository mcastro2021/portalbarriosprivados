{% extends "base.html" %}

{% block title %}Mapa Interactivo - Portal Tejas 4{% endblock %}

{% block content %}
<div class="container-fluid py-4">
    <!-- Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h2 class="mb-1">
                <i class="bi bi-map me-2"></i>Mapa Interactivo Tejas 4
            </h2>
            <p class="text-muted mb-0">Explora nuestro barrio con 755 lotes en 4 etapas</p>
        </div>
        <div>
            <button class="btn btn-outline-primary" onclick="showStats()">
                <i class="bi bi-bar-chart me-2"></i>Estad√≠sticas
            </button>
        </div>
    </div>

    <!-- Map Info Cards -->
    <div class="row mb-4">
        <div class="col-md-3">
            <div class="card border-0 shadow-sm text-center">
                <div class="card-body">
                    <i class="bi bi-houses-fill text-success fs-1 mb-2"></i>
                    <h4 class="mb-0">755</h4>
                    <small class="text-muted">Lotes Totales</small>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card border-0 shadow-sm text-center">
                <div class="card-body">
                    <i class="bi bi-grid-3x3-gap-fill text-primary fs-1 mb-2"></i>
                    <h4 class="mb-0">71</h4>
                    <small class="text-muted">Manzanas</small>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card border-0 shadow-sm text-center">
                <div class="card-body">
                    <i class="bi bi-diagram-3-fill text-info fs-1 mb-2"></i>
                    <h4 class="mb-0">4</h4>
                    <small class="text-muted">Etapas</small>
                </div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card border-0 shadow-sm text-center">
                <div class="card-body">
                    <i class="bi bi-tree-fill text-warning fs-1 mb-2"></i>
                    <h4 class="mb-0">120</h4>
                    <small class="text-muted">Hect√°reas</small>
                </div>
            </div>
        </div>
    </div>

    <!-- Map Container -->
    <div class="row">
        <div class="col-lg-9">
            <div class="card border-0 shadow-sm" style="height: 600px;">
                <div class="card-header bg-white">
                    <h6 class="mb-0">
                        <i class="bi bi-geo-alt me-2"></i>
                        Plano Maestro - Tejas 4 (Basado en imagen oficial)
                    </h6>
                </div>
                <div class="card-body p-2">
                    <!-- Interactive Map Image -->
                    <div style="position: relative; width: 100%; height: 100%; background: #f8f9fa; border-radius: 5px;">
                        <div style="position: absolute; top: 10px; left: 10px; background: white; padding: 10px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); z-index: 10;">
                            <h6 class="mb-2">üìç Tejas 4 - An√°lisis del Mapa</h6>
                            <div class="small">
                                <div class="d-flex align-items-center mb-1">
                                    <div style="width: 12px; height: 12px; background: #4CAF50; margin-right: 8px; border-radius: 2px;"></div>
                                    <span>Etapa 1 - Vendida (180 lotes)</span>
                                </div>
                                <div class="d-flex align-items-center mb-1">
                                    <div style="width: 12px; height: 12px; background: #2196F3; margin-right: 8px; border-radius: 2px;"></div>
                                    <span>Etapa 2A - En venta (220 lotes)</span>
                                </div>
                                <div class="d-flex align-items-center mb-1">
                                    <div style="width: 12px; height: 12px; background: #FF9800; margin-right: 8px; border-radius: 2px;"></div>
                                    <span>Etapa 2B - Desarrollo (195 lotes)</span>
                                </div>
                                <div class="d-flex align-items-center">
                                    <div style="width: 12px; height: 12px; background: #9C27B0; margin-right: 8px; border-radius: 2px;"></div>
                                    <span>Etapa 3 - Futuro (160 lotes)</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Simulated neighborhood layout -->
                        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center;">
                            <div style="background: linear-gradient(45deg, #e8f5e8, #f0f8f0); padding: 40px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                                <img src="{{ url_for('static', filename='images/tejas4-logo.svg') }}" 
                                     alt="Tejas 4" 
                                     style="height: 60px; margin-bottom: 20px;">
                                
                                <h4 class="text-primary mb-3">Barrio Tejas 4</h4>
                                
                                <div class="row g-2 mb-3">
                                    <div class="col-6">
                                        <div class="p-2 rounded" style="background: #4CAF50; color: white; font-size: 0.8rem;">
                                            <strong>ETAPA 1</strong><br>
                                            <small>Mz. 40-57 (18 manzanas)</small>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="p-2 rounded" style="background: #2196F3; color: white; font-size: 0.8rem;">
                                            <strong>ETAPA 2A</strong><br>
                                            <small>Mz. 20-39 (20 manzanas)</small>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="p-2 rounded" style="background: #FF9800; color: white; font-size: 0.8rem;">
                                            <strong>ETAPA 2B</strong><br>
                                            <small>Mz. 1-19 (19 manzanas)</small>
                                        </div>
                                    </div>
                                    <div class="col-6">
                                        <div class="p-2 rounded" style="background: #9C27B0; color: white; font-size: 0.8rem;">
                                            <strong>ETAPA 3</strong><br>
                                            <small>Mz. 58-70 (13 manzanas)</small>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="d-flex justify-content-center gap-3 mb-3">
                                    <div class="text-center">
                                        <div style="width: 30px; height: 30px; background: #e74c3c; border-radius: 50%; margin: 0 auto 5px; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.7rem;">
                                            üèä
                                        </div>
                                        <small>Club House</small>
                                    </div>
                                    <div class="text-center">
                                        <div style="width: 30px; height: 30px; background: #f39c12; border-radius: 50%; margin: 0 auto 5px; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.7rem;">
                                            üõ°Ô∏è
                                        </div>
                                        <small>Seguridad</small>
                                    </div>
                                    <div class="text-center">
                                        <div style="width: 30px; height: 30px; background: #27ae60; border-radius: 50%; margin: 0 auto 5px; display: flex; align-items: center; justify-content: center; color: white; font-size: 0.7rem;">
                                            üå≥
                                        </div>
                                        <small>Espacios Verdes</small>
                                    </div>
                                </div>
                                
                                <div class="alert alert-info mb-0" style="font-size: 0.85rem;">
                                    <strong>üìä Conteo basado en imagen oficial:</strong><br>
                                    71 manzanas distribuidas en 4 etapas de desarrollo<br>
                                    Estimaci√≥n: 755 lotes totales en ~120 hect√°reas
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Side Panel -->
        <div class="col-lg-3">
            <div class="card border-0 shadow-sm mb-3">
                <div class="card-header bg-white">
                    <h6 class="mb-0">
                        <i class="bi bi-diagram-3 me-2"></i>
                        An√°lisis por Etapas
                    </h6>
                </div>
                <div class="card-body p-0">
                    <div class="list-group list-group-flush">
                        <div class="list-group-item">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <div class="d-flex align-items-center mb-1">
                                        <div style="width: 12px; height: 12px; background: #4CAF50; border-radius: 2px; margin-right: 8px;"></div>
                                        <strong>Etapa 1</strong>
                                    </div>
                                    <small class="text-muted">Manzanas 40-57 ‚Ä¢ Vendida</small>
                                </div>
                                <div class="text-end">
                                    <div class="badge bg-success">180</div>
                                    <small class="d-block text-muted">lotes</small>
                                </div>
                            </div>
                        </div>
                        
                        <div class="list-group-item">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <div class="d-flex align-items-center mb-1">
                                        <div style="width: 12px; height: 12px; background: #2196F3; border-radius: 2px; margin-right: 8px;"></div>
                                        <strong>Etapa 2A</strong>
                                    </div>
                                    <small class="text-muted">Manzanas 20-39 ‚Ä¢ En venta</small>
                                </div>
                                <div class="text-end">
                                    <div class="badge bg-primary">220</div>
                                    <small class="d-block text-muted">lotes</small>
                                </div>
                            </div>
                        </div>
                        
                        <div class="list-group-item">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <div class="d-flex align-items-center mb-1">
                                        <div style="width: 12px; height: 12px; background: #FF9800; border-radius: 2px; margin-right: 8px;"></div>
                                        <strong>Etapa 2B</strong>
                                    </div>
                                    <small class="text-muted">Manzanas 1-19 ‚Ä¢ Desarrollo</small>
                                </div>
                                <div class="text-end">
                                    <div class="badge bg-warning">195</div>
                                    <small class="d-block text-muted">lotes</small>
                                </div>
                            </div>
                        </div>
                        
                        <div class="list-group-item">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <div class="d-flex align-items-center mb-1">
                                        <div style="width: 12px; height: 12px; background: #9C27B0; border-radius: 2px; margin-right: 8px;"></div>
                                        <strong>Etapa 3</strong>
                                    </div>
                                    <small class="text-muted">Manzanas 58-70 ‚Ä¢ Futuro</small>
                                </div>
                                <div class="text-end">
                                    <div class="badge" style="background: #9C27B0;">160</div>
                                    <small class="d-block text-muted">lotes</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card border-0 shadow-sm">
                <div class="card-header bg-white">
                    <h6 class="mb-0">
                        <i class="bi bi-star me-2"></i>
                        Amenities Destacados
                    </h6>
                </div>
                <div class="card-body">
                    <div class="d-flex align-items-center mb-3">
                        <div style="width: 40px; height: 40px; background: #e74c3c; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 12px;">
                            <i class="bi bi-building text-white"></i>
                        </div>
                        <div>
                            <strong>Club House</strong>
                            <small class="d-block text-muted">Piscina, quincho, SUM</small>
                        </div>
                    </div>
                    
                    <div class="d-flex align-items-center mb-3">
                        <div style="width: 40px; height: 40px; background: #f39c12; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 12px;">
                            <i class="bi bi-shield-check text-white"></i>
                        </div>
                        <div>
                            <strong>Seguridad 24hs</strong>
                            <small class="d-block text-muted">Control de acceso, CCTV</small>
                        </div>
                    </div>
                    
                    <div class="d-flex align-items-center mb-3">
                        <div style="width: 40px; height: 40px; background: #27ae60; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 12px;">
                            <i class="bi bi-tree text-white"></i>
                        </div>
                        <div>
                            <strong>Espacios Verdes</strong>
                            <small class="d-block text-muted">Plazas, senderos, reserva</small>
                        </div>
                    </div>
                    
                    <div class="d-grid gap-2 mt-3">
                        <button class="btn btn-outline-success btn-sm" onclick="contactSales()">
                            <i class="bi bi-whatsapp me-2"></i>Consultar Disponibilidad
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Statistics Modal -->
<div class="modal fade" id="statsModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">
                    <i class="bi bi-bar-chart me-2"></i>
                    An√°lisis Detallado - Tejas 4
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6>üìä Conteo de Manzanas (Basado en imagen oficial)</h6>
                        <div class="table-responsive">
                            <table class="table table-sm">
                                <thead>
                                    <tr>
                                        <th>Etapa</th>
                                        <th>Manzanas</th>
                                        <th>Lotes Est.</th>
                                        <th>%</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><span class="badge bg-success">Etapa 1</span></td>
                                        <td>18</td>
                                        <td>180</td>
                                        <td>24%</td>
                                    </tr>
                                    <tr>
                                        <td><span class="badge bg-primary">Etapa 2A</span></td>
                                        <td>20</td>
                                        <td>220</td>
                                        <td>29%</td>
                                    </tr>
                                    <tr>
                                        <td><span class="badge bg-warning">Etapa 2B</span></td>
                                        <td>19</td>
                                        <td>195</td>
                                        <td>26%</td>
                                    </tr>
                                    <tr>
                                        <td><span class="badge" style="background: #9C27B0;">Etapa 3</span></td>
                                        <td>13</td>
                                        <td>160</td>
                                        <td>21%</td>
                                    </tr>
                                    <tr class="table-info">
                                        <td><strong>TOTAL</strong></td>
                                        <td><strong>71</strong></td>
                                        <td><strong>755</strong></td>
                                        <td><strong>100%</strong></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <h6 class="mt-3">üè† Numeraci√≥n de Manzanas</h6>
                        <ul class="list-unstyled small">
                            <li><strong>Etapa 1:</strong> Manzanas 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57</li>
                            <li><strong>Etapa 2A:</strong> Manzanas 20-39 (consecutivas)</li>
                            <li><strong>Etapa 2B:</strong> Manzanas 1-19 (consecutivas)</li>
                            <li><strong>Etapa 3:</strong> Manzanas 58-70 (consecutivas)</li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h6>üìà Distribuci√≥n y Caracter√≠sticas</h6>
                        
                        <div class="progress mb-3" style="height: 20px;">
                            <div class="progress-bar bg-success" style="width: 24%" title="Etapa 1">24%</div>
                            <div class="progress-bar bg-primary" style="width: 29%" title="Etapa 2A">29%</div>
                            <div class="progress-bar bg-warning" style="width: 26%" title="Etapa 2B">26%</div>
                            <div class="progress-bar" style="background: #9C27B0; width: 21%" title="Etapa 3">21%</div>
                        </div>
                        
                        <h6>üèóÔ∏è Estado de Desarrollo</h6>
                        <ul class="list-unstyled">
                            <li class="mb-2">
                                <span class="badge bg-success me-2">VENDIDA</span>
                                Etapa 1 - Infraestructura completa
                            </li>
                            <li class="mb-2">
                                <span class="badge bg-primary me-2">EN VENTA</span>
                                Etapa 2A - Lotes disponibles
                            </li>
                            <li class="mb-2">
                                <span class="badge bg-warning me-2">DESARROLLO</span>
                                Etapa 2B - En construcci√≥n
                            </li>
                            <li class="mb-2">
                                <span class="badge" style="background: #9C27B0; color: white;">FUTURO</span>
                                Etapa 3 - Pr√≥ximamente
                            </li>
                        </ul>
                        
                        <h6>üéØ Servicios Incluidos</h6>
                        <div class="row g-2">
                            <div class="col-6">
                                <div class="card border-0 bg-light text-center p-2">
                                    <i class="bi bi-shield-check text-success"></i>
                                    <small>Seguridad 24hs</small>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="card border-0 bg-light text-center p-2">
                                    <i class="bi bi-building text-primary"></i>
                                    <small>Club House</small>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="card border-0 bg-light text-center p-2">
                                    <i class="bi bi-tree text-success"></i>
                                    <small>Espacios Verdes</small>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="card border-0 bg-light text-center p-2">
                                    <i class="bi bi-road text-secondary"></i>
                                    <small>V√≠as Pavimentadas</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-success" onclick="contactSales()">
                    <i class="bi bi-whatsapp me-2"></i>Contactar Ventas
                </button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>

<script>
function showStats() {
    const modal = new bootstrap.Modal(document.getElementById('statsModal'));
    modal.show();
}

function contactSales() {
    const message = "Hola! Me interesa conocer m√°s sobre los lotes disponibles en Tejas 4. ¬øPodr√≠an enviarme informaci√≥n sobre precios y condiciones?";
    const whatsappUrl = `https://wa.me/5491144445555?text=${encodeURIComponent(message)}`;
    window.open(whatsappUrl, '_blank');
}

// Add some interactivity to the cards
document.querySelectorAll('.card').forEach(card => {
    card.addEventListener('mouseenter', function() {
        this.style.transform = 'translateY(-2px)';
        this.style.transition = 'transform 0.2s ease';
    });
    
    card.addEventListener('mouseleave', function() {
        this.style.transform = 'translateY(0)';
    });
});
</script>

<style>
.card {
    transition: all 0.2s ease;
}

.progress {
    border-radius: 10px;
    overflow: hidden;
    box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
}

.progress-bar {
    transition: width 0.6s ease;
}

.list-group-item {
    border-left: none;
    border-right: none;
}

.badge {
    font-size: 0.75rem;
}

@media (max-width: 768px) {
    .container-fluid {
        padding: 1rem;
    }
    
    .card-body {
        padding: 1rem;
    }
}
</style>
{% endblock %}
